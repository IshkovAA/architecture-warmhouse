# Project_template

Это шаблон для решения проектной работы. Структура этого файла повторяет структуру заданий. Заполняйте его по мере работы над решением.

# Задание 1. Анализ и планирование

<aside>

Чтобы составить документ с описанием текущей архитектуры приложения, можно часть информации взять из описания компании и условия задания. Это нормально.

</aside

### 1. Описание функциональности монолитного приложения

**Управление отоплением:**

- Пользователи могут управлять температурой в доме с помощью установленных реле - удаленно включать/выключать отопление.
- Система поддерживает в настоящий момент только датчики температуры и реле включения/выключения для управления отоплененим.

**Мониторинг температуры:**

- Пользователи могут получать данные о температуре в своем доме с датчиков, зарегистрированных в системе. 
- Данные с датчиков температуры доступны через веб-интерфейс.
- Система поддерживает регистрацию (подключение), обновление и опрос датчиков температуры.
- Данные с датчиков получаются через запрос от сервера к датчику. 
- Самостоятельно подключить датчик температуры пользователь не может, требуется выезд специалиста.

### 2. Анализ архитектуры монолитного приложения

- **Язык программирования:** Go
- **База данных:** PostgreSQL
- **Архитектура:** Монолитная, все компоненты системы (обработка запросов, бизнес-логика, работа с данными) находятся в рамках одного приложения.
- **Взаимодействие:** Синхронное, запросы обрабатываются последовательно.
- **Масштабируемость:** Ограничена, так как монолит сложно масштабировать по частям.
- **Развертывание:** Требует остановки всего приложения.

### 3. Определение доменов и границы контекстов

- Домен **Управление отоплением**
-- контекст: регистрация реле отопления
-- контекст: взаимодействие с реле отопления
- Домен **Мониторинг данных**
-- контекст: регистрация датчиков температуры (добавление, редактирование параметров, удаление)
-- контекст: регистрация данных с датчиков температуры
-- контекст: представление данных с датчиков

(отсутствует реализация домена Управление отоплением в кодовой базе)

### **4. Проблемы монолитного решения**

- Риск ошибок. Изменение части приложения может непредсказуемо сказаться на работоспособности всего приложения.
- Длительные циклы сборки и развертывания. При каждом обновлении системы требуется полная сборка и развертывание всей системы.
- Трудно управлять командой. Все модули системы тесно связаны между собой, трудно разделить (изолировать) задачи между участниками команды разработки, что приводит к конфликтам и задержкам.
- Масштабируемость. Синхронные запросы приводят к задержкам при высокой интенсивности мониторинга, экстенсивном росте количества подключенных датчиков и пользователей системы. Невозможно масштабировать точечно части функционала системы.

### 5. Визуализация контекста системы — диаграмма С4

[Диаграмма контекста монолита](./docs/diagrams/C4_monolit.png)

# Задание 2. Проектирование микросервисной архитектуры

В этом задании вам нужно предоставить только диаграммы в модели C4. Мы не просим вас отдельно описывать получившиеся микросервисы и то, как вы определили взаимодействия между компонентами To-Be системы. Если вы правильно подготовите диаграммы C4, они и так это покажут.

**Диаграмма контейнеров (Containers)**

[Диаграмма контейнеров](./docs/diagrams/C4_microservice_Containers.png)

**Диаграмма компонентов (Components)**

[Диаграмма компонентов](./docs/diagrams/C4_microservice_Component.png)
*Выбран для примера контейнер обработки сценариев автоматизации.*

**Диаграмма кода (Code)**

[Диаграмма кода](./docs/diagrams/C4_microservice_Code.png)
*Выбран для примера конотейнер обработки сценариев автоматизации.*

# Задание 3. Разработка ER-диаграммы

[ER-диаграмма](./docs/diagrams/C4_microservice_ER.png)

# Задание 4. Создание и документирование API

### 1. Тип API

API описан для Rule Engine Service (обработка сценариев автоматизации).

**REST API** будет использоваться для получения списка всех сценариев, выполнения CRUD для каждого из сценариев. Управление сценариями будет происходить пользователями через WEB-интерфейс, необходим немедленный ответ от сервиса, описанные эндпоинты не требуют длительного времени для обработки или ожидания дополнительных данных.

**AsyncAPI** используется для Rule Engine Service, потому что этот сервис работает с потоками событий — телеметрией устройств и срабатываниями правил — в режиме асинхронного обмена сообщениями через брокеры (Kafka, MQTT). Такой подход обеспечивает масштабируемость, быструю реакцию на события и снижает связанность между микросервисами.

### 2. Документация API

[REST API](./docs/api/RuleEngineService/swagger.yaml)

[AsyncAPI](./docs/api/RuleEngineService/asyncapi.yaml)

# Задание 5. Работа с docker и docker-compose

Приложение реализовано в директори ./apps/temperature-api. Отвечает корректно на запросы монолита.
