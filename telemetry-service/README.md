# Содержание
- [Сервис телеметрии для получения ивентов от оборудования](#сервис-телеметрии-для-получения-ивентов-от-оборудования)
- [Логика обработки ивентов аварийного выключения модуля](#логика-обработки-ивентов-аварийного-выключения-модуля)
- [Логика обработки ивентов подключения нового дома к системе](#логика-обработки-ивентов-подключения-нового-дома-к-системе)
- [Логика обработки ивентов телеметрии](#логика-обработки-ивентов-телеметрии)
- [C4 Telemetry Service component diagram](#c4-telemetry-service-component-diagram)
- [C4 Telemetry Service code diagram](#c4-telemetry-service-code-diagram)

### Сервис телеметрии для получения ивентов от оборудования
Сервис телеметрии отвечает за обработку ивентов от оборудования и датчиков, 
а также за взаимодействие с DeviceService через HTTP для управления устройствами.

### Логика обработки ивентов аварийного выключения модуля:
1. **Аварийнас ситуация**: В процессе работы оборудования могут возникать предопределенные ситуации, например, перегрев, 
слишком высокая или низкая температура, сбой в работе модулей и т.д.

2. **Получение ивента аварийной остановки**: При публикации аварийного ивента в соответствующий топик, 
сервис телеметрии отправляет HTTP-запрос в DeviceService, чтобы инициировать аварийное отключение оборудования.

3. **Сохранение ивента**: Ивенты, связанные с аварийным выключением модулей, 
сохраняются в MongoDB для дальнейшего анализа и аудита.

### Логика обработки ивентов подключения нового дома к системе:
1. **Подключение нового дома к системе**: При настройке нового дома для работы с системой умного дома, 
сервис оборудования отправляет ивент в Kafka. Это позволяет сервису телеметрии учесть новое подключение.

2. **Сохранение ивента**: Ивенты о подключении нового дома сохраняются в MongoDB для актуализации состояния системы.  

### Логика обработки ивентов телеметрии:
1. **Генерация ивентов**: Во время работы системы всё оборудование в домах пользователей отправляет телеметрические данные в Kafka, 
фиксируя текущее состояние и производительность.

2. **Сохранение ивента**: Телеметрические ивенты сохраняются в MongoDB для последующего мониторинга и анализа.
   
### C4 Telemetry Service component diagram
![System Architecture](./Component_CleverVillageSystem_TelemetryService.svg)

### C4 Telemetry Service code diagram
![System Architecture](./Code_CleverVillageSystem_TelemetryService.svg)
