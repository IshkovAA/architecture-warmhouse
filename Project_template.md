# Project_template

# Задание 1. Анализ и планирование
### 1. Описание функциональности монолитного приложения

**Управление отоплением:**

- Пользователи могут удалённо включать/выключать отопление в своих домах.

**Мониторинг температуры:**

- Система получает данные о температуре с датчиков, установленных в домах. 
- Пользователи могут просматривать текущую температуру в своих домах через веб-интерфейс.

### 2. Анализ архитектуры монолитного приложения

- Язык программирования: Go
- База данных: PostgreSQL
- Архитектура: Монолитная, все компоненты системы (обработка запросов, бизнес-логика, работа с данными) находятся в рамках одного приложения.
- Взаимодействие: Синхронное, запросы обрабатываются последовательно.
- Масштабируемость: Ограничена, так как монолит сложно масштабировать по частям.
- Развертывание: Требует остановки всего приложения.

### 3. Определение доменов и границы контекстов

Домены и контексты:
- Управление системой отопления
  - Получение состояния всех датчиков
  - Подключение новых датчиков
  - Обновление статусов датчиков
  - Удаление датчиков из системы
- Мониторинг датчиков
  - Получение состояния всех датчиков
  - Обновление показателей датчиков

### **4. Проблемы монолитного решения**

1. Проблема архитектуры моделей базы данных:
 - Система не способна хранить историю изменения показателей датчиков, что исключает дальнейший анализ поведения отопительной системы
 - Управление статусом датчика является не явным, так как не понятно - отключается сам датчик или отопительная система, за которую отвечает датчик. К тому же, система отопления может иметь несколько датчиков и для отключения всей системы требуется отдельная сущность системы. Лучшее решение внести два состояние - статус датчика и статус отопительной системы
 - Локация (адрес нахождения датчика) указывается в виде строки, что при системе датчиков в базе по одной и той же локации приводит к дублированию данных и большему потреблению памяти. Лучшее решение - создание отопительной системы как группы, где указана локация (отдельной сущности)
 - Мониторинг и управление системой отопления находятся в одной базе данных. Данный подход может привести к проблеме с производительностью базы данных из за частых апдейтов показателей датчиков. Лучшим решением будет разделить базы данных на две отдельных реплики + рид-онли реплики по возможности

2. Проблема архитектуры и инфраструктуры:
Так, как приложение является полностью синхронным - на дистанции это может приводить в проблемам с производительностью. Управление датчиками и метрики датчиков прямо влияют друг на друга. При ошибках или занятости ресурсов в мониторинге - мы получаем невозможность отключения системы датчиков.
На первых этапах компании, данные проблемы могут не проявится. Но с хайлоуд-трафиком, данный подход будет неэффективным и не масштабируемым.
Метрики - больше важна консистентность
Управление - больше важна доступность

3. Проблема командных взаимодействий
- С увелечением разновидностей датчиков, реле и прочих узлов отопительных систем, поддерживать код в монолите для команды будет проблематичным. Это может блокировать разработку управления системой и обратно.

### 5. Визуализация контекста системы — диаграмма С4

[Ссылка на диаграмму](https://www.plantuml.com/plantuml/png/TP8nRzj038Lt_GhMKmhKqTAfKm8tg0CqW14xw1YS9TewuEweafGT__lo93aL76UJYCVtFP9t9-fOknYABpvLeQiH6jLMVfGbk-FjtclJRJj1hYWf9hsjA9PjS2dtp4NhuBVbuljybKilJx_Bw4IHhVIwo1rlUjjczqAz1eJPM8IVtktPHTWHmpewLbXIH5YYKv_si3wPIuGvB3fcmy8J9GeMPbOKAsIXTDEOdeu9-HlCbkVlcVtSGzihuDWGM5N0GHR3qVh19r4N0jRGZ2mPM2xL89Y4M6PVYs98S2CvMxO_1p309E-WwgaXq57WFPM04Z16KWmdoDjZ2k_C38kKl1A36LXWfnsZfGDjq7FlCydn-l2cDnFXVUkDkPbqtgyUSmpJ8ISNG90FlaApSmejqy7NAC3embnzn2aLQgVkWZK67IhcU-Kw6RTgJk8hztym_DlvDcBISPH-aC_dM0yBlvXbh4u1vzDCxcU0WsDFdK2Wol2Kv9BwZ67wKAvTyqMm9oqtczMw_8DRU7cqrjnvHVxX1hzGvSCoOSSKpwRbyyDwyxdZvQONmrFfCzaYQe6AOdJvGmaCaO1IIRlTO7brcrSmezSqAQEhZPnzBxFUcRYBuHy0)

Диаграмма контекста показывает текущую монолитную архитектуру системы "Теплый дом":

1. **Владелец дома** - взаимодействует с системой через веб-интерфейс для управления отоплением и мониторинга температуры.
2. **Smart Home System (Монолит)** - основная система, написанная на Go, которая обрабатывает все запросы пользователей, хранит данные о датчиках в PostgreSQL и обеспечивает управление отоплением.
3. **Temperature API** - внешний сервис, который предоставляет актуальные данные о температуре.
4. **Home Heating System** - физическая система отопления в доме, которая получает команды от Smart Home System.
5. **Temperature Sensors** - физические датчики температуры, установленные в различных локациях дома, которые отправляют данные в Smart Home System.

Все взаимодействия в системе происходят синхронно, без использования асинхронных вызовов или микросервисной архитектуры.

# Задание 2. Проектирование микросервисной архитектуры

**Диаграмма контейнеров (Containers)**

[Ссылка на диаграмму контейнеров](https://www.plantuml.com/plantuml/png/hPN1ak8s48RlF4M7qsmLkrpsbDFE3bD3ac73ZfdAqINBZL6DBJaj2K9IUVT8iZ361YPKSg6iLlVtjwNcznTj61bRbV3mENrGqZ0XaTAPO0MnQlI3aBoqESB6c5h_E9qIstqgXDdOp6eaxWfGcazSLTEwPDA3FcgJboARFdp-kFIXryNpj6BQ84sx4fzgbpiQ6M5AX74RXgWCQqMGL8mCp5M5yCYLtZj8DHwDbaXQoRkDYwkTgvd0U7vu7hl5FTGX0tOR1IwgWO5FXfrh77I0vhWL7FNumsYK16xwLLcPCzhVXOJK5wHuK7NKiyryWBz6001j_tUi5cd13ExOthUo_0cUcfNlx4bDu4b8__YYh44DJER0hDcWD88p7o7ytQ8s6em2LjUaQX9k0oh1IMcas7TFTeTPwh8T-3VCuBwkIuyJgj52niq4LliQ4qwYDZwu9BKLkHDqfI2aGLepZk7S_TKE9IgLYHAZoY8ipWh1DxVUueb6Ktj5fgVbjzBuiexpwXuXQPRDEVhV1PEiG1qum3XNLXezwHwdKB8zOKNYpn0Pl5Wp2nsvMGXS5cmAWB0Gsb20Je0hkHQ5fQEgDioSkQeDkXHPTFJcJUIoO2o1PkfqeBk76fsQ9VJQXbGva2f5iUbfFSVGPR5OrAeDg1gv9M7s7MeIGvUfXJ-B2PIAlpNzQqjR56N99CU11BD6LU4aEoBtRV2opB4Go9OOfJXAHa9T6BOAjNR5QKRg3Sd3cW1y3G6F_uMjtvX_c3jUmEgzv1jIKbaDN5MLbOU1oz3i42N4ni-Bph9cnlFiCDupPbZ6TFE_KTeKXCdtPxzAZABUc8EGQqLLVvuZEavqWCTXVX_Vr5m7T-_5mRjNyhv0_seS_k_MVH__C7Sr8-DaqkZDdjD4O1RTkhNXOESn3oecxPfnOmbpoFOGES7SNx3iVYYEDlcg6zvyjLecBhEN6CtkScvBEZNy1Nj33TxsEIjBR-9juVJdvDTliRgBlnaG22TLFRkCtvRkToNlVbVwn24m3b0V6UEtiOP-5s5nupRQqD8YBkxSoXkQMUIrExVnXixL4ZjxLva1UdgbHwzuGPPhM9EgWhNjI1WyKDp_BRRKlx-ule5mxZqwiNz9EjlCm6-NDYk5tXpd2xSeuzb4xuKbAQEuAcDx_Q6w1esvH-eqiPdc9BBGRK_Klyv5sVxqNTMDoV-BS7zChmeVal-xS7yEBaYVqj_31cxVx8UMyw2aHDwEmUBxQZLzUKnMdl05PMwhyXy0)

** Диаграмма компонентов (Components)**

- [Диаграмма компонента - Device Service](https://www.plantuml.com/plantuml/png/XLHDS-Cs3BthLw0-9JD9TDbJJxjhPzAFzTPhUwSplMXW2POvfaYLWEnwEltl5KLJLgBLv197Zu_l0I20ZopefAaqp3zaSrlLrf2HRA6mT5Xb2pgfd3Ra_4_oapAvRWg2WqZDFwUfm_DJgUJGx1ecbriZPEGfjrLQQpHUzf6bq6gNpZyyhZpqVVabhP25N3eqVAfRRfA84aqmws6unW5xwo340jTWPaaojqPG6NBPPzkO0jtbhkWu6GVE0ypUNBg7VnC0WDuXti1QtTYVLh-25tTMQtApzk35Fi2BClxVbRCdLH33-dcpzTGkk2035HeigI8Zi_iV6mM6kvajFH1T_DzVq1IQE4ewAXMBGr7MG7i4kJLxLJO1cR9XGHdcxp_7Lbk7-P4XRvpprUQEPVU0Mb_jUMHGEoisjph30clfCbbT8VZaeQ511p2Sq2dRz2b52OQxvRVjzW7-KkMEgFrz_1DFT3-LLA4ujoTobrjYYmZTF2F4OEWSqm1hG0xKGdAsxZZbGAVsWs_op_uRLirEApuC4ujGdrEeNNv0KxQWMAY86Kk2dRD7SbE6ZchBIkmmftN4XacX862U4pDel90RTbs1Wgt1VqcokR1GbJt_qxuJEl6p4JZiOmu811lsifkgnU1WA-eBjNUsWkjb__hzbDrXhR8IXSxeW_MT_nA-tap8sZP2tFKgDd8W8of7ZpZwko6MrwhNEcMXJktrPG3WSmTumTznVyJPuCXphoL0lfWSSbjLZL5vd8bUVh7hcsStw1eKt25JzvAMfNIq-VQbAuXOH_ociCcQzEliNssD9Hw9kqsGezOC4iPukrrjqjysVtnj5Rp0yCve6NnducbUdEOngrSOzzEO7eNU9u-EXqLS4nRNFl5lV7PAA6RTbd4YmD7Uc8xl7UxuTDphyxuXYE6ivE23yyic3Ric3Qicke_soqG4K_pnWwwxjKsE8RAe2AmOqFJ3tDRGLojghuZ1xeSRPXZ8a3-QfTkQ2XGGsmyKnBNjE_mZcQAfzFy0)
- [Диаграмма компонента - Heating Service](https://www.plantuml.com/plantuml/png/dLHDRzim3BtxLt0vjK3RN7hQgMjQjFle5YJfsM1aDX5gIvv8fGY6_VTPaMSxiTCCknZ94_aU7qNgXWMT-2A7oNKwiKLf3Hb9xpIk71Rf8w5eivgJssX5oGTjLEupWhL8oH_7OuTlLoijQx_qJ4vP8rNsbRB5kCpH1DvBbYpNo_7a-d8QeEUdR-C2MSYDkufNPHMR9A8b9nWrCDI5m8jrK1S3TJMZ99bKWgWDkVJMUfEXsvwjOr3ACUW2HeTfv_0h0G1eH9eSB7Kd_jFqCmG1P_EStAWwUR0NyA1D-3brTgCpOfZTpnUxq51XJGG56bnHKN6FpW-qX8gI78ftbCOmLz4jMXIU8Xe5mpS239rKO9AWn80c0rPhodnE7DG6dQd6HskmPovyQumRAnc5fl7xFgpHOdi-8jhn4G46vPshEFOCESAiqZjkWJPXCDULttqNzm67nuYtOX5WsAKnl3XRG47Ck29OEljAxeHIwPUvvlM0rZIUTDN-GctVQbsn_whggBGS-hFj2CuQiDMwGq50fOWPSjoIsnkz30KhZT-TvJZ3KgSh57h3m1s6zI7-EnZgcVL2SQJGovgCQ8K1SVJJ4qkud9OrJaPdqUvsGBDdlVcD2ViaTNFIs9mG706utG4X_Ik-lEAEfzl8w1fvQnGeMnJUX5grDHLzCgDyt_J-XZ_XA_5kQHNcEOF4YLaiflFnb_cFxnL5ODXB6jxRPoOUYXxQksxm85j_4eOLMjBJEVqr_K-XtcqVUobWet6udSEBt9k0kL-oSdf9uMAw-ziC0qoT5Qji_XxpqIihCvHZh-aIcJAmffQD_CCFmr3jxJlGxd-_wjCpq9DggOSh1rMvNiNcdvYM4-pDTRAWq05lSaCcyqN-1m00)
- [Диаграмма компонента - Lighting Service](https://www.plantuml.com/plantuml/png/dLHDKzim4BtxLsnpWXaW5quz0O6X7z1c4ZXdDl9YQv0bLxiEa-dqlzUAdA3Wu3Az1BpQVUzfzNOlMD1BKncOd2ychggT9IkBQus5nsfnfujIj2tcv5TQKVP9MsMQdA0KgVdpUEpnvQpGKZRBXiahPuMid2bNZMk3DW2VikH6ByUJyzDf23tUtuqhP24_JYdFwZOtoqIB8HZjmj0fWIVdOQi6EZcZB9kqZAWj-SMLQsoEVdrakgm5nwmJ6FKAZ-5t1W2mutcjmbgd5PVJhn18l3E6_AWzkdKdSAjj-7VgtKhdn32xcJ-4r8tCBHHKQB6WYgoCZj-ZYpa-fRoFeSWLVcE0Nu5PK8W1RGwiIieRG_m-XTh9JrXwbmg_NInXoYdqgm_EYYmbukVX-oFAGrvKNdjYaW7Tj0fMBDlSDz9lmW5y2GSfMGmmREeOdhohe29cB0YMtZsJ_nTNtIoDvl8GspGUfNnTABrUHotkmyIUQiTQd5-ddBDTz9Nk6WK1bI9k2N5DVjziEGgsD7-IcJZ2MYyA57h1W1xyUHk_tlXuvfgjdx2HagneXI7YwLT371ufGOsUICRhUXFO3LVlzMF1FaZNdqNiJqYE0RZQ14BvTtnwnWrEsijuRUIrLQ1SLJKsQDNEjl3PZCp-fT-CzJq-4sy6LQ4n31ADy_0mdO-_pN_-Q342n7xLWLbzPE93kT7VGuafpC49JKiIjA7yOOg-puOfXlDx6lw_Qjz7G-i7LXe77gg_AthkcZTBLbulARnvkY5sHeEfT-AKCyFG1zrGvoXxMuua_6LO8bCEpdQCWz1zyrmgqQk074-6uVfBhD-6P6NjDjN11WoRgKzqQ1Ug4cqHtsxGQyDmcnh0s0djx1Olko2RDvNv2m00)
- [Диаграмма компонента - Security Service](https://www.plantuml.com/plantuml/png/dPLBZzis4CVl_XHJdn8WMLzowYd9Rh1zP5jZlUdL65EpDh4KgGuf6sxHxruEA3bZotBYN0nh7hy_EG_fVKp8gQqTtBvRteQw2PvyMjvPN3FMomMPbctQBuYtrj3a9-kDQok2JKfD_7asOzpTh6tQjAis4flWKqw_CQ6UDGwzWD_6L3cxcjs-UpiNqvU7pxCQOoAUQScR9iTE9iacHp0zcA4x2Jm7Xluqq1rdEfdSPaMqddZvCRI-Gjw_YbtKCfQeDp0T9Bw6VoS000UThrdOM9tnOVuhY0W7vuYdsNKVti2zzV9tpc5hAuhm-6dn118gn-nHKAF7DTKPFtrz8kU2ULaMFsVGv_m83-MnQCXlCKIeGgQYhs1dVHLs8CbnW5nZ8eMypu_ZI0cEmip_E5j0D8RCsFAMh7FeZMOlb7bSms1DZ4L5Wu3-RcrpjYpea6ibz46UnnLGt4N0XsIVhS5aWvTxZ7INjZBUcvpXY7MVFua3VX67LYg622Jk2CySQgWfHYdPYiCByRUqcdRbRDoSKviNbzRhJH5wJ2-TmdSBCpKXsXHuhpKV3zQlSdUO4D2O30Q7U-BZ0QwoEylyf_Ri5JPsATEpGw7BpD-NfvFTU0njFsBOfWtvP0sAXNFxAQRS94MjIFPIhUoT6AXVs67hIy8nfAlFijH7Wei1Fh8O9FrtV7x1gN99R7TjZ7jlm8IwRdqtIKTuUSEf4tx9VuVd4wkwi40EDGXi_-cnaqTonxKyUGCzu0j5aFeQT2v2AlFuz3HVp7vR_Fb7PWZYE4k_LifXujau4VsUk97z7urN-tivyAIMVw6pbKm7DCIrZL6s6BOM1tSMridRy-pSQscvxHNX-j9NfEcxNuu_Uul11dHVdGWIrxdFrsHunt6On5s6ZLPW7AhYByE5Fleo7gplebr5mtP5Cltw5NpOP9XpIC44bzdZwC5UFB5TvtzTQT78JaPOOQGAWk-Kle7K1TT8iVyGScJR55hxVr123wbc5yS5g537Fss3tgaFsU7xDTArqNKUY2Yef41CKckJBxSkywPsuKgUf8poLDslvHwtp14d3IxTk8vO6fNwlXNOv3tvggtT_m00)
- [Диаграмма компонента - User Service](https://www.plantuml.com/plantuml/png/ZLJDJjj04BxxAROvWGJamgad823w0pHDe5ThOa-I5UjTTsOS55LzzthjsEjaem87b4nclfzFCtl50YHLOTJaCfsuedGMhQIt6bO4HVh2I7EaZSum-QHjPgeSrLgavC_ZCS7RnKhBkbfKZ9GvA_NeHUQASMd0Uj1pbjpenNXoUJxrfPV7Xt41B4ZZ8Tr5MVScYMWng4PzMUrKgAKZvPMedPHHaangDj0MARrnbSs1jYTUHCfjnvaQxGsSgZ-9glzwxBORIjrrNa-_AWzApXYaKLs-TsVgNbl_SKfketDaDRkRF_lMHfA7K0LOM65HGuvE3oYWadMQzPWrpdLTGIiw0z7EHdp-_sE3noquxFLxWjX3Au0w7-ry06oha6LrJF8_jILIePbhdW7aj2zsm95IZutCQcTKWSrLmEA8nphHozRHaEcfAqTSKIf313uU2cxy5fVLmcXUXt3kV5bDktB0xqexXcQSbJXL87FDh1RaNf6Ean6MZhKusdOyixuIA6v1eClAm1Ofx50E0ZNqty5Qdq2fqnK8le57zIjtttuxMCsPgmIvIJriYwyG_gwGnGSKK7TsqjQE3tRdxwOfUC3li7o59lEXzLOjyDPcAdD5KTcmb3tyxQ8D95zqGNZJ2s1iCdOiAyBvpmV_RIwEaFVy9pCq-xu7H_e8hyZDwMLW32jfGlto_3oTZx_DVppLyz7uyGEC8r8R3H5Q0nS4nBVcaztl2Ml_JcTOuRYtepuG7odu1KRdZOsCCFUcmBHEJe_F7rKtGo6D6-J1pnrAhpdqH_i-j1SGFZWGfV3-IFHZMBWPGivgIQvehk6Dj62t9txf1eRYzo4wZFv528z1VnrgIavSvamhAiee9eYVc6mDTeLjr55y7ySAGmU8oHNQl2hCFm00)
- [Диаграмма компонента - Automation Service](https://www.plantuml.com/plantuml/png/ZPP1S_Cc48Rl-XNKfoypINp9gQSaTYPfcxIkvPmr2ArbnWXSG4uzdVxt3yHQHaREE2VhPVTv5rXsycWirRPj19az53FLx9G4QOivfxMcJV7KMjLGovNCGUyvW-mNBfbeAo0RQtVcr-bKqw_xcjjDMxO6D5FIEi0zKyrq9wZqw3jZAy7BwUpXRk6bpu_tQKED1JsDJUztBZRBBBS2oAIN2TP2ragJKpq42vfasSnvKYv15y-gbHNLXn-qZojCYBibav7a6_9VHjnVxnPdqXqVPZqjVYFUJ2iXG4_Sugkw9QzS-fyBhVQy0aEMB_dAXtO5dt2aePBMq3YJoSsPgMu5521hBdsTI_T5Nhglu85u1iQ0YP4kpmko8l0liDRw3-PNJ69X64YgkIf26TeXSvJ8Hv1EPa4mnD_eNGLhBg6AVO-mCPiDLAr0Flu-WTzShRva31jIBJNRb1WsL8GDAizzwXJoWig97fJX4U5va8wlQx046o9rWhrl_LquQAKzq2jaSLJ6RgDBCcIjLKCQ9z4QIAdL5ZJoHrjBmquPRfK-33jisUidhpcrb53c_OYW1z3dZLMv06VsV_GIVhZUBMfguOjw1z-Dh-7hh6kNghNOGewu0MaverxHy4yBnhfJYgYumI9iq3SAxlYv4ppm3xhUqacq5693pUOW6M6gQLh9MLVy05-1lvZenSuxeN-jIN-6X66D6t1WMKUKjw1Snc0ACGTZeHdY1AytPxntb2u3CMcSQ82rcjj3HCnHkamy9eqHvsNSMbKvR2dVFYKr7NEXZAqrv7-_-w_SAdrfdiGlF5k263PKCYG_w1PCD_GO5S8G6rxxQhN8fx_dV_tfA1vodZSob3uDc0lHqPJyFX2dIyphubAxqISvXCUkryIZ-PNq2o7dzxa4Mk6GyRVpfRc5uodxsyGD9XCiUR1vMngcUTbbnyEhVxj-t5d5b73GKURm6bQQrpLeWxtZEwqYIYBQCT93J2PwDBXnMkyvHVlaphvBFmQFSl1QlWTWL7L6w119NZAly9y3WoiXU-GXfAX-QgKiNBgUrO-i5DQlNK_hnrLAwzT6QTaZoAfjn4y0)
- [Диаграмма компонента - API Gateway](https://www.plantuml.com/plantuml/png/bPLFKziy4CRl_XHwSu8P81TExuaqcT9s4ieGe4VFnbuSJVL7bUHaqaw_UoLxiPqem8G3Opsh_QsqMJ--SHwihwLWq-jyggNH2fNFPnmg2pAV67uB7hUmo_xZgX1rYMpjlN7_ZySMjbSLz-jwLJkqXLO-P5uLMewD01MPbywNWg_6q-lB-oWzBUPZ2SwZ7G-hNPcmDyiyzmBPg9CP7OAzQCiczryPdMIKPTDG3BX2ct_IjIh1xix0yBngDromqN3xEVkJiV3NWPkzLjSUBMrzQ1QZiBhL5-oMg_ZOYAwfRF5NZSuxvZK3OwmsbWSwSsWtl40tEZ-eG0dv1WGlmMiRUQt6dacZUl4_IQ4QLw61N5MC2F7o4Zm3LJ835YHwj6azgFqwbxmiHRYonNYje8G8By1phTYYY_LL-os7zqpl4xRaWalUzkmXBDcyNVQyHd3ToMDEqp5ZSHCW3EAWlDageQiAXtsQ1s683-lzKpQ38RNYNjlOijYZ4bTrLONLaJekF3dCsuxIHKXadqaSr5lw00HRyjzTTsXpIqYxHEEGbzmLUeDs5ocjncQlMb_WLNBDoIKeg48bWZ1KfT5SDMN-3aR-R8kh78m9W1-uOXDZ1Ft8pT0Y53u-F0KE2-beNw30fbKXaQsithfsWdgYr2ikaA2BPd6Ko-x2UeDlu5iAAp4UVxz0D8YSBlQQJ8sXTf1ANP2esf67lIdUOxPr1jHP8wHSqdlo7cQD0Qsg0UTBgoIWBX2jpcgnXn6yMXzmvYIb88eS9paiQilzRa1QafIG-eZREO_oA11ghsNJlm5oqeafT12pjS1sF5s12YpNBh2p1nJz6EwvwG9-qjjIW12E-RPpZu_to_6tvVUxa1sI-uaxEP-g3vCIinqwQkyM6mvKVPZyhdD-d7xC69lbXvc9xmL_-pZfc8crtkMwu5l9YJqDFOYYNNBCpcVfX-NWLNv6oryukeCtDKAI7uwG_P4I6droezft8Xs154Ikaw18Fn56df3IA70YZhmXvL7aP61g4GJi8YS2KuleaNtiNMXsWwgifVW7)

** Диаграмма кода (Code)**

- [Диаграмма кода - Device Service](https://www.plantuml.com/plantuml/png/XPHHRzem4CVV-HHUdpgrb9SzHLDL5a8RZIGeX4tJD263Jy6IusIsqmvD--wBSmGIlBLlkVl_VBxx--116wfCNGWoWsU-WurVIgDA8K0rdmn6xxZSYPe1sHjJQMyoKVJbBkTcNszh3MhNu23DtQui9fMWqfOQQyC4tqxy3-EbJQsZnQIWse1gKatLeYgbFLCrx6Xak150hknbPCPfhcX1niTkoBcRgz785rJhet8MoEyH8MFMPbEeIirDgGuUShtCcVf21MVKy5AkGDb41pk2FLE0rZI7PRqLNEz1UIIwo3JKpICOhA6lT-RN-wxYzny3yTCXP5Q_9PoT64lu2gW1Z15Gy7D0h2jsGN3cKZCGS4arm7F9cPMNNEQEY8cLeQRMWsunzJ_op_517AFR1xcPSyccGZXkeFA64IZXQxakkF9mV7TmF7Snq2tHRTnXmu7SPS2vC7to-DG4A5Kg5yWE5LoRG_LFnASLtNB13RThqmjESDUJitFOp374gz0wrhM4KpaKEl4MPOsq56SkWIxwUofpk7xJHcmqd7aDfhZCRHJJ0lgnDSaZPyDiRb7kMlFx7DxiRkoSg-A5ga7DS3bbJ87M_UI2QkENKiBE0FE8TSBm0XUlPtzt1FSr0aCRadeaejL7L6u9bOTxEsiWwwBNEewRFGLfbAooQTP6GRGCqccsJeFDAeXNIThs4Zu-PPlLrp3pdzhX0d-TXjctZJ-D6hfTvoH9Dul4_zosaMHX4dS5XZUZ5NXt4Y_2E6Y_vlFkCvg6SHR4qzXlmo1DiORpPpeUtpi_Q8_K6lHhhFDRUUM8iye3zdnhhxn72Yffta7kTJqMT-aPYUw42-of8tKseZXw0CdgGlm5)
- [Диаграмма кода - Heating Service](https://www.plantuml.com/plantuml/png/dPNDZjis4CVlUWesfnIruqjFEXJPIcvim8aN_a215aL1YnEPA4MgvCYfk-YxLxCIbrIvDj2SrlpFZ_DDxNk7t6BNABO2ZbBNlnT6epLAWUr_2iY-aRfIdG1sHcnTlbXO_kLTBV7SdJe7jkfnqFYkCisYLLoJhxb3eUHfKNm_VoJf-76pQBX3iBtKUsrQe-bEsxDPXX8Li3SKZ9MIrvOtRExJOI6TDrbMAEwSDmKBUyeOcvy7UGUjSHADlUQU319n0YwoWa99q9YpCZgH5Q5fmNBiBEp1aYrdXqGZiW7dU0sFtKb9TmQRiu__KNhgkm-0lnWDxcs5VttxaX59l_uMsN-yhWKXCoR552EeiFqPw3Gm5lvCeMCh9f0KDy0I54p1dhaOASYu1mpbHfweBp56QpFwVSqBclQcbMhULsSGdHe3_6qqh8dmSgZdDN36tAZ6L_xn-v5CdJsHlv-a5WzAtPq6CVz_79JL_NcaL3gChsxKdbyWnkwtPxBnx6aCCuWXXP4ATGpdFI0bxy9Uk56PPZtIoB5pYTD13Wcbp-ibhQAp5dIwaSfK7ANHlS_Fod0SyPLqQAoikBfvey-OLdV6G5D6nEs0Yxw4OGCUBGXPuPtxA1lmSL-AIDx-KC9uZBmLPwvhU4k3d36Z19bcJCENGtXWqSrnMuQMJUwwPoczuGS-ZCt3e-XndtQyZKF6wp9d3cslqUaJRo0-RyOknDg1snhYXaKpIUSN6OUYSZQfaGp3cgnBvyCCe_6LJLDSQh3rzKZDJuRYRxnMMbzougd_2Iwy6HAkG-orUwXGNY1d9sCKS1s-0-81SqQzHjdu1vF88QNOzv1NoQ_Rppy3_94pgNrdB1uazTuxNMeHX7jjfr1BtJNJjleER9RqTxLyEAm_VNYkORlTZ3_tnMfP7ZVByZdURhVTaQ_ql-ry_aFwZSrPvy3TeEDFpbqm_HJSmvD7Dy99SWJ7gvwpXcjUtqJza0Bd5MyECynPPJHogLqMHOWZ-Zq_SvTbxq6Bhb7_0W00)
- [Диаграмма кода - API Gateway](https://www.plantuml.com/plantuml/png/TLHFR_is3BtxKsY_KuecpMKdOmXQf5rR81cAfDsrO6tMrYfBdaJtpuPzzucM2YkQTqailkT7wf7qfIEmD7HAN3tSFzy2uGTyFMzDZSLFKbTgg56qHBqhrsiB7nUDf7Pu6HpQocX2JHULwTQz0iqYAqUraY_hxS-h1muzxNVh3XoXzI6lslL6ypkzvnO5IL8eVd0oSIsXiT295TSXOXq_YcAhm3bnrSk36GYj-BiGOcNvsPLY3_qlHx9IDqinufiHnJy7TFGxA5a36LkAGnPX5WpKxcLTAv_8OYckJiwZ3X3kP2S9MM8w93bsfcb6D3q6tFchElpLs0ueAEGXvZcqxxB2Q-agyuxsgnJ7BE9Pv_TQaWGb_yB5MIdUZQmvUi16ihNZpLsAt86k5SQY5XLzBeKl-6ogeVWdEfjR4mrsLOiTP0uVn-264qGwBdgWzbiShJMMqPs1Ef2dghuJPZw7T3nEyTvR9L5JAPxo4FF--A0ZLXOzxiQYE1iBUbnMG1ZkcfLpyqaMAdeqRwWN0GjlfpS9AF6lntsfidDJqKdteq5aB2PJSUGp0pM-mg1e39P2Qfgw79YPgPunEZfYYpVyMeh8JgzmG8SZcjjvEdcXDcMQw5mfV3m-XyOqaSy-i56kNufwi43IwAWTYJUSEz2G7_FC-Jp7xEVXU1og2frRr42GpDr42F91UGxVIL-a9EpSKlJGI1rAd1lXV6DYXq8qipjox_MhsJ2hybA3yWqV_yEa_V_6tI95WOM63ZsIw8K-lLfqROowkMtz5fYwdDdAsnoiV01gqrdT8xMcJYDHx3VeC0q_WcsGyjTvKRZzqg8NUJ568MW6U8gJWSsDvSk5Wl8yJuVToIwXTTBeD7I7e4whs86ZROlL6nV1cqUoGyuvVUDNgyr_lakb61owZ7JwBPcb99ixZwVxCy_8vdoUbG_Xl1G_bg833Oq7ytUOave-COjBrFNGgNy1)
- [Диаграмма кода - Security Service](https://www.plantuml.com/plantuml/png/ZLPDRnit4BthLx0vkKWKNNhQGv75oaZKM79WEJMAeWZevLGcoey5EQlKAFhVorboLpGjUtk9EFCUPzzySE8F7hd3NYksXxPt4X-_xS4TPGlV6YjWyOCqhUe5i0V4pbUhbUFVtnyaFlJtlGVNMeDWy7rhzQfJt52afKUXvFsg-MdvXLnVjrShpJs22wuGLNVMq9qkS1SBbAY0lQ6FiRNa1ySrMqvYM1BpPh5e5FT-0Xfhq5cbmB5_5emjbMt_sdB33-0gTdKo2EEAEps1DLaPsd8DZazmavk42o01ZP9Wi6Bhp29KW_U1-QM_Lz8_K81juGcijny1H-5xvDZxYnR__h5YJvt4h9tUFte4JOntJ5i1WNUqKX2wbfxdX0oYdDVMEb_ulngLa1XHXDD6P8Gz3S0DjDO9QGwH56jIq6mtow94QmKEHnM3yViVIRkMtW-UU9_JyNJztzJZh7rPSs-WirwYTO_KtzoURL9KfUZMg8lEKHQT0dYsQeH5gR98af3Oj0m_EQTSycbBoN3oPDb4ojDqZ4NvfsmvIclI2wZOxhapJinhirBaTUla8IYXJwPRtlQkXNVC0VVMPDH60JyHYnwtA8_m_pijdpSvlREyCd6Uyj8qXMV-FVf02n6deksVs4b-33igZnP9F_yOvCmpA6TZWds6JqxwJbm8XdV-mUOLskWWTIfHkKbYbTucSrmTbqSmU07qRoOZaORsfPw3k1XxBG2vLFu5FZMUsCzXsY8qv04irqXEeSVpAYbMF2jZMYIX37xodbC73Xi774DiJiOBd3I0n3g_Oeh56miRrshjD8YAtLkhW9lqmBPMGCNIWNoKfgTI5DmxQOJzxeVm1PI_cOh9k9bY9Kv9Ho38l3Iz7ZyOvTLtzM_q--bwUqc_kyt7JxTq-BLkwjlDzMxGjTdNDzlBzHI2DEP9NbqtdmDCAsvtElzIRxUZz_Fk-cwNBJ0I7EzkrXNpw89Cicwb1ezSTnKJ7063ERWVEqZRW8v3OOUno--kmRTEThJ9SdSKccv7Ot334QXP2HXDqdZcpu7bykVyVv2AzHxyIyIqdkUP-RwQevRlDh4pKKJBMfC8kHXYn7Ghfibr5e_pKQY9CKj2UNzUw1mjLMIUkFW0HlHQ_GS0)
- [Диаграмма кода - Аutomation Service](https://www.plantuml.com/plantuml/png/dLNVRzCm47xlNs7s18AkBpn5QDgKLZ2qeMdTU45eSfDJQk7OaNqfAnN_ExcwbpefeMLllli-VtUv7ywbH-cmBhMugj6M4fKrJtDmAvN1Ksfp6BrI9jDr3cA9MFbaCd7ovtcXS5alQWykimR1u7bcoqcbfI6jiSTSgyKaVJ--8zVZxSsab1x1DQv6jQoieJjLmnsDKA46SKR1n5J9mibIZADqn2wTiz4erTBx24gRuCvg3KviHaACNQrXPWfb817txPaGdu6HJjbRQMG1BX7phYDmbf3NUeloaVmvKFXKAp2OY6baDUZRZu0Koh_EyFbD2Flj-mxW80oo7GYf0ub05mX-9oZxdS8UvYk1mfyHQH7riSexIYhlgJ65Bp5jK74A6hgA3M5bLSxWeLP4U72gAC0DCNvp9_SzslVl7Yhh5LgtfkHZcnYm0eDtpcRWlNM9c7LiOiYC9cFs35cDnBZgs9JTjL6ef5Q_86uSvxuJsmg7n86E4MEsahgM2CtqvOh40orZiw4khDKWpV4kS-k6uE4-S17xaomsyRp7rPmV-4wg5mtobTR_d6NYzBiTSLuqpYTHZuvY-10uDegyyLo_w2tuR1SCdZXWJ7-G_aS8YCqfIYgL9WFDS9mFbp88v4JXWjEvAJRNPq2TFwYNbjWSVSd6Iv2eJC7m9pOPrwfOneGRjbk6Ru8vXMjcp3jsr8wGNCW-r3Cgm5UfLIvR4kEyLDtdGsosAprDX4VN94FM5rb2R4_1PqvL91Ev-PLAnEv0ldQdVIBQSwXwICU7XhFpsfErWixAtqYFEqt84q7VWgg4mvLzQVAdPzCRXn3mOLq1NwJprYTT0HX7k9DEbe3WcY2tilemto9DlypwejNbsaN2x6BbkQrT1l-Z_DSV_7Xy4Vql4b5xy8FC_gDuZCuBnyHz88AxkyISNeXX8eiFK_hno4n4IS83WTZ7h22nXTgnNahsjc63aoyV0ADBC7bTwZy0)
- [Диаграмма кода - User Service](https://www.plantuml.com/plantuml/png/dLPDR-Cs4BtxLwXxIf5wVUd9XsApjdSh8743orwWfmKjZIMs4gcIesJTel-z797cSfGO0NeZtpmEttnmf0yMXS6XQxE31VEr0FCaI_YwqXNCVf2gR8SAiWQnjyl5meZdzxN4PZWEZbngXQ3mVQcxHTyAHLxc5gjM7XUhd-UF11qUxXUTi0Z6GSvhrsj5Pth7dSrGOWlPExeiMqjH6z5byr585eIycyrMhR1s15TQeT5jwyp_pB9iJY9sq6ihKPlpaZZ9dXXYm2PuMcPttpTawuq-oHQY-P7jYT61jQA6n-7OIjk0MMOF4yInRdTGImhmfiHlFsK6_lhHAo7RlQwbIWsaOGUsryf28EW1YU6CJrfMtkF9W6ts-ay8Xv6Mhnp_34XNVJpdbIVAAhdzq5S2WNONurJV6bhWZ4J6gX7AnIgiVTQcYb4meHQG4w0JihrG_etLOvKPgtVxIQhgYd1lsf0hxfKJQAT41vupX5r2MnaGc9XvRhXfcfHfGk8P7Y_bj0_8DEoqutp7_l6C1PG6S9bPD5BL18x5tNph9VMmL4YOILeWRV7TgxXl1GL688mcUnDYcZRC5z7AwiAwkRILKoix-wBrKX4JNvxxv2mlgKd6VXMsYVcAQOh1ao0mydIEdCOTO0azQjs2K36d_9c6jFOUInCLQDCSeSUJmkTqIq2J8h-aELaUP7pl4qvWG9LW9tuJI-ARqPd_Q9YSZT5F1v1_Ic5B3UnRlWhrzuNW32VY3GOz06B8wdMx6rerLBcwYN5U9Vqsu3LMR0m_PwetUUEquIm-ONmoydNQNvSPaMBZO4c1omtKhYd-IHgBsydfU_4Is-aM_02X5I452Xoin_pwSdRy9YmpAWBARYI7ejqXXtsbE3nz1pvckeN7VVSaK1WMPACLR8Vk28OHgyg0TKh3mijKzI1g5k9UTl2tLWpxA7NS_kymOfTV2sMhKPvaAL1gvNIcsm8G7SkE0Xlek6BeUXg9Wt5miZaeYMHV2ziSjJ3LCelBw30A36dnuWeq0CXYbdXEzrHhO6dN5aLBlpZic1uKcdWoNiU6hB_phYp1sd6oHZgVr0mVFoHWStNvbjoEbFsvX-cxyDr9Ts_KqCNs3TUk7_Bjo2mskt7G7JR5VWpnzsA_UM37V8U7Wwjz_cL3gtpxVLqSYiVDThrPquPM-VOpkPZyrytdlqn-5fOq7kqhlFJhUfqKdicRlEbW3Kok9SWZQoUKg1s1-q-lV8CJstxAyuJuBEalMqZbfKG1Vk0qWiEX3jwGf8VihBEMMHr-5-nizW5KDNJjVm00)
- [Диаграмма кода - Lighting Service](https://www.plantuml.com/plantuml/png/fLPDZo8t4BtpAvmzRPHbkUJKXsYXWLaaFb03foWQcUuAM7BR7TizsT4e_prjLsCg9g2Hvh9qrNikFxzoUUURTToujfPiAKvd9zJfUGVcHPJmdEiA1Zy9LSgs0dPshh7PQ6JutrzFmftROsl1b5evKEvhgUjH8xdobORMLL8SH_clmwrF7LRBKSsj0zEbkgfrevLVqtJSmS099u5zyfkngU0dmsisZ69OB-RJO91BRcq4SgsSqLA2OMy3neRIvmjej1LEczVC4sd2Ssm92YXdXmdAgS1lbqi1ocLiIYAFrc0jFy6sFKfXps0ojaeo7UkN9t1XT_kvT3z-xgNy_WU59g-BogDVcAWk38_tnmhn1V_2EdThhY9nvxXhRQ0Ru0u8sy1VjDoXgH2drHBE52Gad0v-qQBg1GUNBcS9GJnBY9ApXDnLN0Y9ECIZE8gBAkMWkCX9nOrB9rxu7VmVUcN8JM1lVkbSg6eiPTeX1Evr1x6bBhaJMY53zX6f4i_UCtmwxKeA9kr83nDNOU-lVjaGtz0cnjTJO0dr67Ctz5nBRSXzys7g8pRbeOz8kUSZek_maLIXFbgVJY_GNV2kZt4wvzfuDYsmY38llOodfqy1U-iBOP9iWWaooOIHZ38Ys4zQBcbnoeo2qfS7HVKXUIVoCrSdg3xZJKCVKYRQ_9Y3RZ_cUDCzHrItX60hJgod1B_li53EOmxAUSn9vQIF0bgsc6RCEYFKoKThNWEDzwyDP4ZtdpvrkRYKXbxVFD1n3Zj8AETJOTOo5dvYl8Uw0TEjCX29kxPfj75GpI40b-eOzWE2T-E_HrXow_gkPyoxv4HDNkHgx6WQvoX99rF_7gEcO4iZ6chCFRCMDjo3RlbHQmbS-IGEPJ9-7n5DMXm-YVoFTkQssN5lN8xR5b35DKy6GCLe8bk8mNVu4PLrPMQghQyN3YjD3ij9s7bVBBRXHEDL-CrdY-LY_UG_DuVzTBCfGdOyMQnd-rYD2CLwctNuTpuFLgwBsJZ_FfuiPpwS5SMcY4lfbSErqyLgTU7cc-McY1_F-zbgEol6-qE1bURpMRxVXUCNcyDsvwl-przmm-5lwV_I6Mijs3jaxEzxoVJbVinCdrJ29jAkSZDMSyLF7IKHT1MPKAv0Nw3Kod6X4COahM_WJp2WIbH1CNoNpfm2fCqfX7SxvPFUPipYUqEbf4iHkR_Vu1keggtblm00)


# Задание 3. Разработка ER-диаграммы

- [Диаграмма ER](https://www.plantuml.com/plantuml/png/hLVDRjms4BxlKwZfeK3G1LoWXy88WZZ9RcCajGtREUH4qEAibhL42YHbryaQQ1FqKA10tw10to0DajPfVleAsZVgK6D8fB0otDW7m-JCaFo-RuR3rHthk75LaITx1GxO0rq0c-oo-v9dXXUZqHT9_SVoUNrMlrl-cjHdIVsXVhdyQVby-MFziNvR_rEVZJuJC9CAaidM_kR-4tPl-z7sRlBvT6twpNJQEdTsDx_Rs7t27awwYEbaRRBMHaotToURtsw54PErwJJOOtVoQ6D_Stjhxy7cJXVIR3AoXrAL724dQSwjJPwDakGkJmypeoibxkbScmWWkZUCqSUDPyNEVhas0Wm5tCrnBxHDjN9Rl01SB7b-RjYJJo7vwklHQIFNx_M_ACwR-ZN-lSE_3oZUcmGrUx7y1ISVlNfeVjkeURRyEK51KKwC-XD3dgEihqOZK4wwa-J6OmlcHi9jKk6W8NLJYcGzUVnuytvowzREmzktqJOUZv8cGY4qz5fdfChG1WMNUMWekRN7o8lDkPs7Zfaqrh7--folC1gT-pcegi2PTTnLjftJabndKg5DS0TE5e3sr01E1ECkjbUbM64_xIJOCNecSsXKA6bCGdZ2B5RZosGQACAFkECceZ_N2XW2FG0JyrHPnRE8fiVnLAl8TY1rDxqI9vY10PM29LxT_9BSb7Po9bFkf5PU_U-jLXxq78gO1HGb6Eug0wnIqdM94bW11veRmImuXz7jDW7G-t0aKz9UDCEBQx1VAkwa34gbq0AYQYougcOyzU1ChnYBOuw8Zy1O9DZvLjIR9X7265aoBeG1QwDiQQKWNP4lgbaBS5qbkn-8lWVAQhh3BZ3Rnangah8NfZkjZ07bMB051izopPtNKQeX3_zXm3El2YaGRM2Y-kZTVWDSu7I8wHnCeNrEY64xlIPcZfiC1cbh4LJNZ2iMMsmw1r7byVbqDd5BvrnbC43jaSpcn2h7qUK9zGlqmFZbYefHAjTKOgx3WYT3ZoM5sgeijV7LDeF6qrtsot3GwI5HmC6dC-3EWJbXEHn1tYBZbTFCxukM0wrpu2scIdaxY1MtZ1m3SE_n0Wnl0AVDy9CX6qYreReDm1cmEg_wtKBv_B0ZQT4UXHVQXp813bBNTrgd3S-0bTnr3sb8PYy5HPtJukX_Dau1DZMoZA4ED3lBEC8xWWxU5NeNmMP1txUD8Up-P1b8nwMo5JyuQ2crbKJCLrU8PrVhei5XS72LrsUMQsswwZN0krPo5Rcenv1KDBcUN5zxNWaRcoXdJYAu3Bnf4FJD2_eeCHByXEaPEmOux1gNuyOn9nkkvo11YTXo-Vv-1UORbTD5SsqQrhoTNakQy7-MWM5XiNLMnCExAkTD6mb3EsCScMebw4AGQR0UIYErGPgjxasNFJyUn3Nze9aSWQAt4FpeOk5YUbPN9es5Z9ZwewpZHHb3AerEmLeG4LjP-CUGgxGz8Cnp3eP0SXnT4UH0jlllZ4KzI7wo3FBXwQ7Inpc837K-EEdVezWVv-7YpyhwrVAt-c_we7oF__wgNozVz3utCU9zVUQtyT-JIVqA5xp4zU-zcpP0T-LzYyLuh1VjXzPwCkSsyeIVAdtli-1oePFABGgWrsJ0HsbR3xMm7ZGzHaEm1NaNUZnUB5RzniQROSSyZWj_gQxoqs--0PTE3rTxw4TBptTAlkRvMgSN7CHOAi_CFxQ3n4WgqYP-XL4-hHoNoex87X_LHdMfeiEeZG-VH_xkoEXv20uDnFD7waKRwxktpdDzt9pOTTwXCuDwETNDgH55etCRnqH5rFH3xeXUqwCkB9AM6VXGN9-10jEi9qkl3i-xAEv-1vIeYlm_)

# Задание 4. Создание и документирование API

### 1. Тип API

Я предлагаю использовать Rest API + Kafka (в ассинхроне)

Rest API - легко поддерживается, интегрируется, создает минимум сетевых проблем, что важно на первыъ эатапа разработки
Kafka - для ассинхроных действий, по типу оповещение, управлением состояний между сервисами, сбор логов. Данный подход обеспечит отказустойчивость и консистентность

### 2. Документация API

- [API Gateway](./api-gateway.yaml)
- [User Service](./user-service.yaml)
- [Device Service](./device-service.yaml)
- [Automation Service](./automation-service.yaml)

# Задание 5. Работа с docker и docker-compose

Перейдите в apps.

Там находится приложение-монолит для работы с датчиками температуры. В README.md описано как запустить решение.

Вам нужно:

1) сделать простое приложение temperature-api на любом удобном для вас языке программирования, которое при запросе /temperature?location= будет отдавать рандомное значение температуры.

Locations - название комнаты, sensorId - идентификатор названия комнаты

```
	// If no location is provided, use a default based on sensor ID
	if location == "" {
		switch sensorID {
		case "1":
			location = "Living Room"
		case "2":
			location = "Bedroom"
		case "3":
			location = "Kitchen"
		default:
			location = "Unknown"
		}
	}

	// If no sensor ID is provided, generate one based on location
	if sensorID == "" {
		switch location {
		case "Living Room":
			sensorID = "1"
		case "Bedroom":
			sensorID = "2"
		case "Kitchen":
			sensorID = "3"
		default:
			sensorID = "0"
		}
	}
```

2) Приложение следует упаковать в Docker и добавить в docker-compose. Порт по умолчанию должен быть 8081

3) Кроме того для smart_home приложения требуется база данных - добавьте в docker-compose файл настройки для запуска postgres с указанием скрипта инициализации ./smart_home/init.sql

Для проверки можно использовать Postman коллекцию smarthome-api.postman_collection.json и вызвать:

- Create Sensor
- Get All Sensors

Должно при каждом вызове отображаться разное значение температуры

Ревьюер будет проверять точно так же.


