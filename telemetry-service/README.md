# Содержание
- [Сервис телеметрии для получения ивентов от оборудования](#сервис-телеметрии-для-получения-ивентов-от-оборудования)
- [Логика обработки ивентов аварийного выключения модуля](#логика-обработки-ивентов-аварийного-выключения-модуля)
- [Логика обработки ивентов подключения нового дома к системе](#логика-обработки-ивентов-подключения-нового-дома-к-системе)
- [Логика обработки ивентов телеметрии](#логика-обработки-ивентов-телеметрии)
- [C4 Telemetry Service component diagram](#c4-telemetry-service-component-diagram)
- [C4 Telemetry Service code diagram](#c4-telemetry-service-code-diagram)

### Сервис телеметрии для получения ивентов от оборудования
Отвечает за обработку ивентов от оборудования и их процессинг, а также за взаимодействие с DeviceService по.
HTTP протоколу.

### Логика обработки ивентов аварийного выключения модуля:
1. **Аварийнас ситуация**: во время работы модулей может возникать заранее известная ситуация, 
например, уже и так и слишком жарко, слишком холодно, перегрев оборудования, и так далее.

2. **Получение ивента аварийной остановки**: при получения аварийного ивента в топик, сервис телеметрии можно отправить HTTP запрос в микросервис.
управления оборудования для выполнения аварийной остановки работы приборов. 

3. **Сохранение ивента**: ивенты о подключении нового дома сохраняются в MongoDB

### Логика обработки ивентов подключения нового дома к системе:
1. **Подключение нового дома к системе**: при установке и настройке нового дома для работы с системой Smart Home
сервис оборудования отправляет в Kafka ивент о подключении, для того чтобы сервис телеметрии "знал" о новом подключении.

2. **Сохранение ивента**: ивенты о подключении нового дома сохраняются в MongoDB  

### Логика обработки ивентов телеметрии:
1. **Генерация ивентов**: при работе системы всё оборудования в домах клиентов отправляет 
в Kafka ивенты о состоянии работы оборудования

2. **Сохранение ивента**: ивенты телеметрии сохраняются в MongoDB
   
### C4 Telemetry Service component diagram
![System Architecture](./Component_CleverVillageSystem_TelemetryService.svg)

### C4 Telemetry Service code diagram
![System Architecture](./Code_CleverVillageSystem_TelemetryService.svg)
